/*!
 Realtyna Lightbox Plugin
 @Author Steve M. @ Realtyna UI Department
 @Copyright 2015 Realtyna Inc.
 @license Realtyna Inc.
 @Version 1.9.6.6
 */
!function($,t,e,a){"use strict";$._realtyna.fn.lightbox=function(){function D(t){var e=t.data("realtyna-lightbox-obj-opts"),a=o.getInlineOptions(t.attr("data-realtyna-lightbox-opts"));return $.extend(!0,{},e,a)}function I(t,e){$("html").addClass(r.lock),u=$("<div />").attr("id",O.overlay).addClass(s.getClass(r.overlay,n.overlayClass)).css({zIndex:n.zIndex}),l=$("<div />").attr("id",O.wrap).addClass(s.getClass(r.wrap,n.wrapperClass)),l.appendTo(u).addClass("center"==n.position?C.showBox:r.rightPos),g=$("<div />").attr("id",O.closeBtn).addClass(s.getClass(r.close,n.closeClass)),g.hide().appendTo(l),b=$("<div />").attr("id",O.content).addClass(s.getClass(r.content,n.contentClass)),b.appendTo(l),u.appendTo(n.addTo),_(),o.trigger("beforeOpen"),w(t),n.showLoading&&(m=s.ajaxLoader.show(l,"normal","center",!1,n.loading.color)),e.call()}function w(f){var r,a,t,e,i=s.getBrowserSizes().browser();if(n=D(f),c){var d=h.css("position");h.css({position:"absolute"}),n.autoSize?(e=h.not("script, style").eq(0).outerWidth(),t=h.not("script, style").eq(0).outerHeight()):(e=n.width,t=n.height),h.css({position:"static"===d?"":d}),"center"==n.position?(e=Math.min(e+2,n.maxWidth),t=Math.min(t+2,n.maxHeight),e=Math.max(e,n.minWidth),t=Math.max(t,n.minHeight),r=i.width/2-e/2,a=Math.max(i.height/2-t/2,40),x?l.css({height:n.autoSize?"auto":t,left:r,top:a,width:e}):(l.animate({left:r,top:a,width:e,height:t},450),setTimeout(function(){t>n.minHeight&&(t=n.autoSize?"auto":t),l.css({height:t}),u.css({overflowY:"auto"}),l.trigger("onShow"),o.trigger("afterOpen")},600))):"right"==n.position&&(a=0,$("#wpadminbar").length&&(a=$("#wpadminbar").outerHeight()),l.css({left:"100%",top:a,height:0===a?"100%":"calc(100% - "+a+"px)",width:e}).animate({marginLeft:"-"+e},450),setTimeout(function(){l.trigger("onShow"),o.trigger("afterOpen")},600))}else"center"==n.position?l.css({width:100,height:100,left:i.width/2-50,top:i.height/2-50}):"right"==n.position&&l.css({width:100,height:"100%",left:"100%",top:0}).animate({marginLeft:-100},100);return!0}function T(t){var e;return"undefined"!=typeof t.attr("href")?e=t.attr("href"):"undefined"!=typeof t.attr("data-realtyna-href")?e=t.attr("data-realtyna-href"):$._realtyna.lightbox.close(),e.length>0?"#"==e[0]?"inline":"ajax":void 0}function _(){$(u).on("click.realtyna-lightbox",function(e){var t=$(e.target);t.hasClass(r.wrap)||0!=t.parents("."+r.wrap).length||v.close()}),$(g).on("click.realtyna-lightbox",function(t){t.preventDefault(),v.close()}),$(t).on("resize.realtyna-lightbox",function(){t.resizeEvt,$(t).on("resize.realtyna-lightbox",function(){clearTimeout(t.resizeEvt),t.resizeEvt=setTimeout(function(){w(z)},250)})}),$(e).on("keydown.realtyna-lightbox",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),v.close())})}function W(){$(t).off("resize.realtyna-lightbox"),$(e).off("keydown.realtyna-lightbox")}function L(t){var e=/^#[a-z]+[\w-]*$/gi;if(f=t.attr("href")||t.attr("data-realtyna-href"),e.test(f)){if(i=$(f),0===i.length)return void o._error(t,n.errors.notFound);i.data(p)||i.data(p,$('<div class="'+p+'"></div>').insertAfter(i).hide()),i=i.show().invisible().detach(),c=!0,$(b).append(i),l.bind("onReset",function(){$(this).find(i).length&&(n.autoSize&&l.height(i.outerHeight()),i.hide().replaceAll(i.data(p)).data(p,!1),n.clearContent&&i.html(""))}),l.bind("onShow",function(){i.visible().hide().fadeIn(),g.fadeIn(),s.ajaxLoader.hide(m),d=!1,x=!0,o.trigger("afterShow")}),j=setInterval(function(){i.html().length>0&&(clearInterval(j),0==i.children().length&&(i.wrapInner('<div class="'+n.cssClasses.textOnlyContainer+'"/>'),i.prepend('<h2 class="'+n.cssClasses.title+'">'+n.title+"</h2>"),i.wrapInner('<div class="'+n.cssClasses.textOnlyWrap+'"/>')),0!=i.find("."+n.cssClasses.title).length&&0==i.find("."+n.cssClasses.textOnlyContainer).length&&i.wrapInner('<div class="'+n.cssClasses.textOnlyContainer+'"/>'),0==i.find("."+n.cssClasses.title).length&&0==i.find("h2").length&&i.prepend('<h2 class="'+n.cssClasses.title+'">'+n.title+"</h2>"),0==i.find("."+n.cssClasses.textOnlyWrap).length&&i.wrapInner('<div class="'+n.cssClasses.textOnlyWrap+'"/>'),h=i.children(),w(t))},300)}}function k(t){var e=t.attr("data-realtyna-lightbox-data")||{};"undefined"!=typeof n.ajaxData&&(e=n.ajaxData),f=t.attr("href")||t.attr("data-realtyna-href"),"undefined"!=typeof n.ajaxURL&&(f=n.ajaxURL),$.ajax({type:n.ajaxType,dataType:n.ajaxDataType,url:f,data:e,error:function(e,a){o._error(t,n.errors.unexpected)},success:function(e,a){"success"===a&&(i=$("<div/>").addClass(r.ajax).html(e),h=i.children(),c=!0,o.trigger("beforeOpen"),b.append(i.show().invisible()),w(t))}}),l.bind("onShow",function(){i.visible().hide().fadeIn(),g.fadeIn(),s.ajaxLoader.hide(m),d=!1,x=!0,o.trigger("afterShow")})}var S={minWidth:200,minHeight:130,maxWidth:9999,maxHeight:9999,width:800,height:500,title:"",autoSize:!0,zIndex:9999,position:"center",showLoading:!0,reloadPage:!1,clearContent:!0,loading:{color:"#000"},addTo:"body",overlayClass:"",wrapperClass:"",contentClass:"",closeClass:"",ajaxType:"POST",ajaxDataType:"html",ajaxData:a,ajaxURL:a,cssClasses:{lock:"realtyna-lightbox-lock",overlay:"realtyna-lightbox-overlay",wrap:"realtyna-lightbox-wp",title:"realtyna-lightbox-title",content:"realtyna-lightbox-cnt",close:"realtyna-lightbox-close-btn",error:"realtyna-lightbox-error",ajax:"realtyna-lightbox-ajax",placeholder:"realtyna-lightbox-placeholder",textOnlyWrap:"realtyna-lightbox-text-wrap",textOnlyContainer:"realtyna-lightbox-text-cnt",rightPos:"realtyna-lightbox-right-pos"},effects:{fadeIn:"wpl-fx-fadeIn",fadeOut:"wpl-fx-fadeOut",showOverlay:"wpl-fx-fadeIn",showBox:"wpl-fx-fadeInBottom",hideBox:"wpl-fx-fadeOutBottom"},errors:{notFound:"Selected content not found!",unexpected:"An unexpected error happen. Please try again."},callbacks:{beforeOpen:null,afterOpen:null,afterShow:null,afterClose:null}},v=this,y=null,s=Realtyna,z=null,n={},r=null,C=null,p=null,c=!1,x=!1,d=!1,u=null,l=null,g=null,b=null,m=null,i=null,h=null,f=null,j=null,B="inline",O={overlay:"realtyna-js-lightbox-overlay",wrap:"realtyna-js-lightbox-wrapper",content:"realtyna-js-lightbox-content",closeBtn:"realtyna-js-lightbox-close"},o=$._realtyna.lightbox.fn={};o._beforeOpen=[],o._afterOpen=[],o._afterShow=[],o._afterClose=[],o.open=function(t){t=t,d=!0,n=t.data("realtyna-lightbox-obj-opts"),r=n.cssClasses,C=n.effects,p=r.placeholder,I(t,function(){switch(B=T(t)){case"inline":L(t);break;case"ajax":k(t);break;default:return!1}})},o.trigger=function(t){var e=n.callbacks,a=o["_"+t];e.hasOwnProperty(t)&&null!==e[t]&&a.unshift(e[t]);for(var i=0;i<a.length;++i)a[i].call();return!0},o.getInlineOptions=function(t){return t?s.options2JSON(t):!1},o._error=function(t,e){h=$("<div/>").text(e).addClass(r.error),h.invisible().appendTo(b),c=!0,o.trigger("beforeOpen"),w(t),l.unbind("onShow").bind("onShow",function(){h.visible().hide().fadeIn(),s.ajaxLoader.hide(m),o.trigger("afterShow"),d=!1,x=!0})},this.initialize=function(e,t,a){return y=a,"undefined"!=typeof t&&t&&y.each(function(){if(!$(this).data("realtyna-lightbox-obj-opts")){var t=$.extend(!0,{},S,e),a=o.getInlineOptions($(this).attr("data-realtyna-lightbox-opts"));t=$.extend(!0,{},t,a),$(this).data("realtyna-lightbox-obj-opts",t),$(this).on("click.realtyna-lightbox",function(t){d||(t.preventDefault(),o.open($(this),t))})}}),this},this.open=function(t,e){var a=e||{};return y=s.isQuery(t)?t:$(t),v.initialize(a,!0,y),o.open(y)},this.close=function(){return c?(l.trigger("onReset"),c=!1,x=!1,d=!1,o._beforeOpen=[],o._afterOpen=[],o._afterShow=[],o._afterClose=[],$(l).removeClass(C.showBox+" "+n.position),"center"==n.position?$(l).addClass(C.hideBox):"right"==n.position&&$(l).animate({marginleft:0},450),$(u).fadeOut(600,function(){W(),$(this).remove(),o.trigger("afterClose"),$("html").removeClass(r.lock),n.reloadPage&&location.reload()}),!0):!1},this.on=function(e,a){var t="_"+e;return o.hasOwnProperty(t)&&o[t].push(a),!0}},$._realtyna.lightbox=function(){var t;return{version:"1.9.6.6",init:function(e,a){return e?(t||(t=new $._realtyna.fn.lightbox,this.open=t.open,this.on=t.on,this.close=t.close),t.initialize(a,!0,e)):!1},initObject:function(){return t||(t=new $._realtyna.fn.lightbox,this.open=t.open,this.on=t.on,this.close=t.close),t},open:null,on:null,close:null}}()}(jQuery,window,document);